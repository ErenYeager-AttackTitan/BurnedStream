<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Proxy HLS Player</title>
  <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    #player {
      width: 100%;
      max-width: 800px;
      aspect-ratio: 16 / 9;
    }
  </style>
</head>
<body>
  <video id="player" class="video-js vjs-default-skin" controls autoplay preload="auto"></video>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const streamUrl = urlParams.get("url");

    if (streamUrl) {
      const proxiedUrl = `/proxy?url=${encodeURIComponent(streamUrl)}`;

      const player = videojs("player", {
        fluid: true,
        autoplay: true,
        controls: true,
        sources: [{ src: proxiedUrl, type: "application/x-mpegURL" }]
      });
    } else {
      document.body.innerHTML = "<h2>No stream URL provided (?url=)</h2>";
    }
  </script>
</body>
</html>
