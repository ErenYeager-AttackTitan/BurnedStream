<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BurnedStream Hanime Player</title>
<script src="https://cdn.jwplayer.com/libraries/aVr2lJgW.js"></script>
<style>
  body { margin:0; background:#000; display:flex; flex-direction:column; height:100vh; }
  #player { width:100%; height:100%; flex:1; }
</style>
</head>
<body>

<div id="player"></div>

<script>
async function initPlayer() {
  const slug = location.hash.slice(1); // burnedsream.pages.dev/hanime#akane-wa-tsumare-somerareru-1
  if (!slug) return alert("No video ID in URL hash!");

  // Fetch m3u8 streams
  const api = await fetch(`https://hanime.tv/api/v8/video?id=${slug}`);
  const data = await api.json();
  const streams = data.videos_manifest.servers[0].streams
    .filter(s => s.url)
    .map(s => ({
      file: s.url,
      label: `${s.height}p`,
      type: "hls"
    }));

  // Fetch VTT captions
  const videoId = data.hentai_video.id;
  const vttApi = await fetch(`https://hanime.tv/rapi/v7/hentai_video_storyboards?hv_id=${videoId}`);
  const vttData = await vttApi.json();
  // Hanime doesnâ€™t return real VTT, this is storyboard placeholder
  const tracks = [
    {
      file: vttData.hentai_video_storyboards[0].url, // Replace with real VTT if available
      kind: "thumbnails"
    }
  ];

  jwplayer("player").setup({
    playlist: [{
      title: data.hentai_video.name,
      image: data.hentai_video.poster_url,
      sources: streams,
      tracks: tracks
    }],
    width: "100%",
    height: "100%",
    controls: true,
    autostart: false,
    captions: { back: true, active: true }
  });
}

window.addEventListener("hashchange", initPlayer);
initPlayer();
</script>

</body>
</html>
