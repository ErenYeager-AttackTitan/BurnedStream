<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RyuuApp - Search</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body { background:#0f0f0f; color:#fff; }
    .card { background:#1a1a1a; }
  </style>
</head>
<body class="p-4">
  <header class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">Search</h1>
    <a href="index.html" class="btn btn-secondary">Home</a>
  </header>

  <input id="query" class="form-control mb-3" placeholder="Search movies or series..."/>
  <div id="results" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>

  <script>
    const API="https://crew-auth.vercel.app";
    document.getElementById("query").addEventListener("input",async(e)=>{
      const q=e.target.value.toLowerCase();
      if(!q){document.getElementById("results").innerHTML="";return;}
      const [m,s]=await Promise.all([
        fetch(`${API}/api/content`).then(r=>r.json()),
        fetch(`${API}/api/series`).then(r=>r.json())
      ]);
      const all=[...m,...s].filter(i=>i.title.toLowerCase().includes(q));
      const results=document.getElementById("results");
      results.innerHTML="";
      all.forEach(item=>{
        const div=document.createElement("div");
        div.className="card";
        div.innerHTML=`
          <img src="${item.posterLow||item.poster}" class="card-img-top">
          <div class="p-2">
            <h6>${item.title}</h6>
            <a href="watch.html?type=${item.type}&id=${item._id}" class="btn btn-sm btn-primary w-100">Watch</a>
          </div>`;
        results.appendChild(div);
      });
    });
  </script>
</body>
</html>
